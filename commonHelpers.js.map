{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet gallery = new SimpleLightbox('.gallery a');\nconst imagesFetch = document.querySelector('.imagesFetch');\nexport function renderImage(results) {\n  const markup = results.reduce((html, result) => {\n    return (html += `\n          <li class=\"imagesFetch-item\">\n          <div class=\"gallery\">\n                 <a href=\"${result.largeImageURL}\">\n                    <img src=\"${result.webformatURL}\" alt=\"1\"/>\n                 </a>\n          </div>\n          <div class=\"imagesFetch-item-description\">\n              <ul class=\"description-list\">\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Likes</p>\n                  <span>${result.likes}</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Views</p>\n                  <span>${result.views}900290</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Comments</p>\n                  <span>${result.comments}229</span>\n              </li>\n              <li class=\"description-list-item\">\n                  <p class=\"item-name\">Downloads</p>\n                  <span>${result.downloads}610937</span>\n              </li>\n              </ul>\n          </div>\n          </li>  `);\n  }, '');\n  imagesFetch.insertAdjacentHTML('beforeend', markup);\n\n  gallery.refresh();\n}","import axios from 'axios';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// let page = 1;\nexport async function fetchImg(inputValue, page) {\n  const APIKEY = '43947691-9c404bec92b20484d2e4a6bea';\n  const searchParams = new URLSearchParams({\n    orientation: 'horizontal',\n    image_type: 'photo',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  const { data } = await axios.get(\n    `https://pixabay.com/api/?key=${APIKEY}&q=${inputValue}&${searchParams}`\n  );\n\n  return data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderImage } from './js/render-functions';\nimport { fetchImg } from './js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst imagesFetch = document.querySelector('.imagesFetch');\nconst loader = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn');\nconst formInput = document.querySelector('.form-input');\nlet page = 1;\n\nconst displayError = (message) => {\n  iziToast.error({\n    title: 'Error',\n    message,\n    position: 'topRight',\n  });\n};\n\nconst handleData = (data, inputValue) => {\n  if (data.length === 0) {\n    displayError('Sorry, there are no images matching your search query. Please try again!');\n    btnMore.style.display = 'none';\n    return false;\n  }\n  renderImage(data.hits);\n  btnMore.style.display = data.hits.length < 15 ? 'none' : 'block';\n  if (data.hits.length < 15) {\n    displayError(\"We're sorry, there are no more posts to load\");\n  }\n  btnMore.dataset.inputValue = inputValue;\n  return true;\n};\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  const inputValue = formInput.value.trim();\n  imagesFetch.innerHTML = '';\n  btnMore.style.display = 'none';\n\n  if (inputValue === '') {\n    displayError('Enter search images value');\n    return;\n  }\n\n  try {\n    loader.style.display = 'block';\n    page = 1;\n    const data = await fetchImg(inputValue, page);\n    if (handleData(data, inputValue)) {\n      loader.style.display = 'none';\n    }\n  } catch (error) {\n    displayError('Something went wrong. Please try again!');\n    loader.style.display = 'none';\n  }\n\n  formInput.value = '';\n});\n\nbtnMore.addEventListener('click', async (e) => {\n  e.preventDefault();\n  page++;\n  loader.style.display = 'block';\n\n  try {\n    const inputValue = e.currentTarget.dataset.inputValue;\n    const data = await fetchImg(inputValue, page);\n    if (handleData(data, inputValue)) {\n      loader.style.display = 'none';\n      const imgBoxes = document.querySelectorAll('.imagesFetch-item');\n      const imgBoxHeight = imgBoxes[0].getBoundingClientRect();\n      window.scrollBy({\n        top: imgBoxHeight.height * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    displayError('Something went wrong. Please try again!');\n    loader.style.display = 'none';\n  }\n});\n"],"names":["gallery","SimpleLightbox","imagesFetch","renderImage","results","markup","html","result","fetchImg","inputValue","page","APIKEY","searchParams","data","axios","form","loader","btnMore","formInput","displayError","message","iziToast","handleData","e","imgBoxHeight"],"mappings":"owBAKA,IAAIA,EAAU,IAAIC,EAAe,YAAY,EAC7C,MAAMC,EAAc,SAAS,cAAc,cAAc,EAClD,SAASC,EAAYC,EAAS,CACnC,MAAMC,EAASD,EAAQ,OAAO,CAACE,EAAMC,IAC3BD,GAAQ;AAAA;AAAA;AAAA,4BAGQC,EAAO,aAAa;AAAA,gCAChBA,EAAO,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAOzBA,EAAO,KAAK;AAAA;AAAA;AAAA;AAAA,0BAIZA,EAAO,KAAK;AAAA;AAAA;AAAA;AAAA,0BAIZA,EAAO,QAAQ;AAAA;AAAA;AAAA;AAAA,0BAIfA,EAAO,SAAS;AAAA;AAAA;AAAA;AAAA,mBAKrC,EAAE,EACLL,EAAY,mBAAmB,YAAaG,CAAM,EAElDL,EAAQ,QAAO,CACjB,CCnCO,eAAeQ,EAASC,EAAYC,EAAM,CAC/C,MAAMC,EAAS,qCACTC,EAAe,IAAI,gBAAgB,CACvC,YAAa,aACb,WAAY,QACZ,WAAY,GACZ,SAAU,GACV,KAAMF,CACV,CAAG,EAEK,CAAE,KAAAG,CAAI,EAAK,MAAMC,EAAM,IAC3B,gCAAgCH,CAAM,MAAMF,CAAU,IAAIG,CAAY,EAC1E,EAEE,OAAOC,CACT,CChBA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCb,EAAc,SAAS,cAAc,cAAc,EACnDc,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,MAAM,EACvCC,EAAY,SAAS,cAAc,aAAa,EACtD,IAAIR,EAAO,EAEX,MAAMS,EAAgBC,GAAY,CAChCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,EACA,SAAU,UACd,CAAG,CACH,EAEME,EAAa,CAACT,EAAMJ,IACpBI,EAAK,SAAW,GAClBM,EAAa,0EAA0E,EACvFF,EAAQ,MAAM,QAAU,OACjB,KAETd,EAAYU,EAAK,IAAI,EACrBI,EAAQ,MAAM,QAAUJ,EAAK,KAAK,OAAS,GAAK,OAAS,QACrDA,EAAK,KAAK,OAAS,IACrBM,EAAa,8CAA8C,EAE7DF,EAAQ,QAAQ,WAAaR,EACtB,IAGTM,EAAK,iBAAiB,SAAU,MAAOQ,GAAM,CAC3CA,EAAE,eAAc,EAChB,MAAMd,EAAaS,EAAU,MAAM,KAAI,EAIvC,GAHAhB,EAAY,UAAY,GACxBe,EAAQ,MAAM,QAAU,OAEpBR,IAAe,GAAI,CACrBU,EAAa,2BAA2B,EACxC,MACD,CAED,GAAI,CACFH,EAAO,MAAM,QAAU,QACvBN,EAAO,EACP,MAAMG,EAAO,MAAML,EAASC,EAAYC,CAAI,EACxCY,EAAWT,EAAMJ,CAAU,IAC7BO,EAAO,MAAM,QAAU,OAE1B,MAAe,CACdG,EAAa,yCAAyC,EACtDH,EAAO,MAAM,QAAU,MACxB,CAEDE,EAAU,MAAQ,EACpB,CAAC,EAEDD,EAAQ,iBAAiB,QAAS,MAAOM,GAAM,CAC7CA,EAAE,eAAc,EAChBb,IACAM,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMP,EAAac,EAAE,cAAc,QAAQ,WACrCV,EAAO,MAAML,EAASC,EAAYC,CAAI,EAC5C,GAAIY,EAAWT,EAAMJ,CAAU,EAAG,CAChCO,EAAO,MAAM,QAAU,OAEvB,MAAMQ,EADW,SAAS,iBAAiB,mBAAmB,EAChC,CAAC,EAAE,sBAAqB,EACtD,OAAO,SAAS,CACd,IAAKA,EAAa,OAAS,EAC3B,SAAU,QAClB,CAAO,CACF,CACF,MAAe,CACdL,EAAa,yCAAyC,EACtDH,EAAO,MAAM,QAAU,MACxB,CACH,CAAC"}